<ng-template #popLeggiRecensione let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Recensione</h4>
  </div>
  <div class="modal-body">
    <p>{{prenotazioneAttiva.getRecensione()}}</p>

    <div class="rate1" >
      <input type="radio" *ngIf="prenotazioneAttiva.getVotoRecensione()!==5"  id="star5" value="5"  disabled/>
      <input type="radio" *ngIf="prenotazioneAttiva.getVotoRecensione()===5" checked  id="star5" checked  value="5" disabled/>
      <label for="star5" title="text">5 stars</label>

      <input type="radio"  *ngIf="prenotazioneAttiva.getVotoRecensione()!==4"  id="star4"  value="4" disabled  />
      <input type="radio"  *ngIf="prenotazioneAttiva.getVotoRecensione()===4" checked id="star4"  value="4"  disabled />
      <label for="star4" title="text">4 stars</label>

      <input type="radio"  *ngIf="prenotazioneAttiva.getVotoRecensione()!==3" id="star3"  value="3" disabled/>
      <input type="radio"  *ngIf="prenotazioneAttiva.getVotoRecensione()===3" checked id="star3"  value="3" disabled/>
      <label for="star3" title="text">3 stars</label>

      <input type="radio"  *ngIf="prenotazioneAttiva.getVotoRecensione()!==2" id="star2"  value="2" disabled/>
      <input type="radio"  *ngIf="prenotazioneAttiva.getVotoRecensione()===2" checked id="star2"  value="2" disabled/>
      <label for="star2" title="text">2 stars</label>

      <input type="radio"  id="star1" *ngIf="prenotazioneAttiva.getVotoRecensione()!==1" value="1" disabled />
      <input type="radio"  id="star1" *ngIf="prenotazioneAttiva.getVotoRecensione()===1" checked  value="1" disabled/>
      <label for="star1" title="text">1 star</label>
    </div>
    
  </div>
  <div class="modal-footer">
    <button class="btn btn-dark"  (click)="modal.dismiss()">Chiudi</button>
  </div>
</ng-template>


<ng-template #popInserisciRecensione let-modal>
  <form [formGroup]="dati" (ngSubmit)="invio(modal)">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Recensione</h4>
    </div>
    <div class="modal-body" style="height:100px">
      
        <div class="row">
          <input id="commento" type="text" formControlName="recensione" maxlength="45" placeholder="Inserisci un breve commento della tua esperienza (max 45 char)">
        </div>


        <div class="rate" >
          <input type="radio" formControlName="votoRecensione" id="star5"  value="5" />
          <label for="star5" title="text">5 stars</label>
          <input type="radio" formControlName="votoRecensione" id="star4"  value="4" />
          <label for="star4" title="text">4 stars</label>
          <input type="radio" formControlName="votoRecensione" id="star3"  value="3" />
          <label for="star3" title="text">3 stars</label>
          <input type="radio" formControlName="votoRecensione" id="star2"  value="2" />
          <label for="star2" title="text">2 stars</label>
          <input type="radio" formControlName="votoRecensione" id="star1"  value="1" />
          <label for="star1" title="text">1 star</label>
        </div>


    
    </div>
    <div class="modal-footer">
      <input type="submit" [disabled]="dati.invalid" class="btn btn-dark" value="Salva">
      <button class="btn btn-dark" type="button" (click)="chiudiPopUp(modal)">Chiudi</button>
    </div>
</form>
</ng-template>


<div  id="page-content">
  <div class="padding">
    <div class="row d-flex justify-content-center">
      <div class="col-xl-12 col-md-12">
        <div class="card user-card-full">
          <div class="row m-l-0 m-r-0">
            <div class="col-sm-4 bg-c-lite-green user-profile">
              <div class="card-block text-center text-white">
                <div class="m-b-25">
                  <img
                  *ngIf="this.genereU === 'M'"
                    src="https://cdn1.iconfinder.com/data/icons/user-pictures/100/supportmale-512.png"
                    class="img-radius"
                    alt="User-Profile-Image"
                  />
                  <img
                  *ngIf="this.genereU === 'F'"
                    src="https://cdn1.iconfinder.com/data/icons/user-pictures/100/girl-512.png"
                    class="img-radius"
                    alt="User-Profile-Image"
                  />
                </div>
                <h6 class="f-w-600">{{this.nomeU}}</h6>
                <h6 class="f-w-600">{{this.cognomeU}}</h6>
                <i
                  class="mdi mdi-square-edit-outline feather icon-edit m-t-10 f-16"
                ></i>
              </div>
            </div>
            <div class="col-sm-8">
              <div class="card-block">
                <h6 class="m-b-20 p-b-5 b-b-default f-w-600 " id="info">Informazioni personali</h6>
                <div class="row">
                  <div class="col-sm-6">
                    <p class="m-b-10 f-w-600">Email</p>
                    <h6 class="text-muted f-w-400">{{emailU}}</h6>
                  </div>
                  <div class="col-sm-6">
                    <p class="m-b-10 f-w-600">Codice Fiscale</p>
                    <h6 class="text-muted f-w-400">{{codiceFiscaleU}}</h6>
                  </div>
                </div>
                
                <div class="row">
                  <div class="col-sm-6">
                    <p class="m-b-10 f-w-600">Data di Nascita</p>
                    <h6 class="text-muted f-w-400">{{dataNascitaU}}</h6>
                  </div>
                  <div class="col-sm-6">
                    <p class="m-b-10 f-w-600">Luogo di Nascita</p>
                    <h6 class="text-muted f-w-400">{{luogoNascitaU}}</h6>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6">
                    <p class="m-b-10 f-w-600">Genere</p>
                    <h6 class="text-muted f-w-400">{{genereU}}</h6>
                  </div>
                  
                </div>
                <ul class="social-link list-unstyled m-t-40 m-b-10">
                  <li>
                    <a
                      href="#!"
                      data-toggle="tooltip"
                      data-placement="bottom"
                      title=""
                      data-original-title="facebook"
                      data-abc="true"
                      ><i
                        class="mdi mdi-facebook feather icon-facebook facebook"
                        aria-hidden="true"
                      ></i
                    ></a>
                  </li>
                  <li>
                    <a
                      href="#!"
                      data-toggle="tooltip"
                      data-placement="bottom"
                      title=""
                      data-original-title="twitter"
                      data-abc="true"
                      ><i
                        class="mdi mdi-twitter feather icon-twitter twitter"
                        aria-hidden="true"
                      ></i
                    ></a>
                  </li>
                  <li>
                    <a
                      href="#!"
                      data-toggle="tooltip"
                      data-placement="bottom"
                      title=""
                      data-original-title="instagram"
                      data-abc="true"
                      ><i
                        class="mdi mdi-instagram feather icon-instagram instagram"
                        aria-hidden="true"
                      ></i
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<h1>
<span class="badge badge-warning " id="prenEff" >PRENOTAZIONI EFFETTUATE</span>
</h1>
<div class="card-group evet-card text-light mbg-2 mt-5" *ngFor="let prenotazione of prenotazioniEffettuate" >
  <div class="card mb-0">
    <div class="card-body py-1">
      <div class="row">
        <div class="col-5 col-sm-3">
          <div class="display-4 ">
            <span class="badge">{{prenotazione.getDayInizio()}}</span>
          </div>
          <div class="display-4">
            {{prenotazione.getMonthInizioText()}}
          </div>
        </div>
        <div class="col-7 col-sm-9">
          <div class="d-flex flex-column">
            <h3 class="card-title text-uppercase mt-0">
              <strong>{{prenotazione.getNomeEvento()}}</strong>                    
            </h3>
            <div class="card-text">
              {{prenotazione.getDescrizioneEvento()}}
            </div>
            
            <ul class="list-inline mt-auto" style="margin-bottom:0px">
              <li class="list-inline-item"> <strong>Categoria:</strong></li>
              <li class="list-inline-item"><i class="fa fa-list-alt" aria-hidden="true"></i> {{prenotazione.getCategoriaEvento()}}</li>
            </ul>
            <ul class="list-inline mt-auto">
              <li class="list-inline-item"> <strong>Autore:</strong></li>
              <li class="list-inline-item"><i class="fa fa-user" aria-hidden="true"></i> {{prenotazione.getAutoriEvento()}}</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="card mb-0">
    <div class="card-body py-1">
      <div class="row h-100">
        <div class="col-6 col-sm-5">
          <ul class="list-group my-0 pl-1">
            <li class="list-inline-item"><i class="fa fa-clock-o" aria-hidden="true"></i> {{prenotazione.getOraInizio()}}:{{prenotazione.getMinutiInizio()}}-{{prenotazione.getOraFine()}}:{{prenotazione.getMinutiFine()}}</li>
            <li class="list-inline-item"><i class="fa fa-calendar-check-o" aria-hidden="true"></i> {{prenotazione.getDayText()}}</li>
            <li class="list-inline-item"><i class="fa fa-map-marker" aria-hidden="true"></i> {{prenotazione.getNomeLuogo()}}</li>
            <li class="list-inline-item"><i class="fa fa-compass" aria-hidden="true"></i> {{prenotazione.getNomeSettore()}}</li>
            <li class="list-inline-item"><i class="fa fa-map" aria-hidden="true"></i> {{prenotazione.getUbicazione()}}</li>
          </ul>
        </div>
        <div class="col-6 col-sm-7  bg-white text-dark">
          <ul class="list-group my-0 pl-1">
            <li class="list-inline-item" style="font-size:25px;margin: 0 auto;"><!--<i class="fa fa-money" aria-hidden="true" ></i>--> {{prenotazione.getPrezzoBiglietto()*prenotazione.getPostiPrenotati()| currency:'EUR'}}</li>
            <!-- <span id="utentiInvitati" class="badge badge-danger " style="margin-top: 5px;" >Hai invitato: {{prenotazione.getPostiPrenotati()-1}} amici!</span>
             -->
            <button id="utentiInvitati" type="button" class="badge badge-danger " placement="right"
                ngbPopover="{{getUtentiInvitati(prenotazione.getIdPrenotazioneEffettuata())}}" popoverTitle="Utenti invitati :">
                Hai invitato: {{prenotazione.getPostiPrenotati()-1}} amici! Clicca per vedere!
            </button>
            

            <button type="button" class="btn btn-warning mt-3" *ngIf="prenotazione.getDataFine()<this.today && prenotazione.getRecensione()==null" (click)="apriModal(prenotazione.getIdPrenotazioneEffettuata(),popInserisciRecensione)">Aggiungi Recensione</button>
            <button type="button" class="btn btn-warning mt-3" *ngIf="prenotazione.getDataFine()<this.today && prenotazione.getRecensione()!=null" (click)="apriModal(prenotazione.getIdPrenotazioneEffettuata(),popLeggiRecensione)" >Leggi la tua Recensione</button>
          </ul>
          
        </div>
      </div>
    </div>
  </div>
</div>

